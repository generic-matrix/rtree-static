(this.webpackJsonprteee=this.webpackJsonprteee||[]).push([[0],{145:function(e,t,n){},146:function(e,t,n){},151:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),a=n(13),r=n.n(a),s=(n(78),n(17)),c=n(67),l=n(16),d=n(23),h=n(2),u=function(e){var t=e.shapeProps,n=e.isSelected,i=e.onSelect,a=e.onChange,r=e.AddPoint,s=e.Getpoints,c=e.SetPoints,u=e.IsLeaf,g=o.a.useRef(),j=o.a.useRef();return o.a.useEffect((function(){n&&(j.current.nodes([g.current]),j.current.getLayer().batchDraw())}),[n]),Object(h.jsxs)(o.a.Fragment,{children:[Object(h.jsx)(d.c,Object(l.a)(Object(l.a)({opacity:.4,onDblClick:i,onDblTap:i,ref:g},t),{},{draggable:!0,onClick:function(e){if(1===e.evt.button){var n=e.target.getStage().getPointerPosition(),i={x:n.x,y:n.y},o=t.id,a=prompt("Add the point name");if(null===a||""===a);else if(u(o)){var l=s.slice();l.push({x:i.x,y:i.y}),r(a,o,a,i.x,-1*i.y),c(l)}else alert("Cannot add points in Non leaf region ")}},onDragEnd:function(e){a(Object(l.a)(Object(l.a)({},t),{},{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var n=g.current,i=n.scaleX(),o=n.scaleY();n.scaleX(1),n.scaleY(1),a(Object(l.a)(Object(l.a)({},t),{},{x:n.x(),y:n.y(),width:Math.max(5,n.width()*i),height:Math.max(n.height()*o)}))}})),n&&Object(h.jsx)(d.f,{ref:j,boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:t}})]})},g=function(e){var t=o.a.useState(null),n=Object(s.a)(t,2),i=n[0],a=n[1],r=o.a.useState([20,50]),c=Object(s.a)(r,2),l=c[0],g=c[1],j=function(e){e.target===e.target.getStage()&&a(null)};return Object(h.jsx)(d.d,{width:window.innerWidth,height:window.innerHeight,onMouseDown:j,onTouchStart:j,children:Object(h.jsxs)(d.b,{children:[e.GetRectangles.map((function(t,n){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(d.e,{text:t.id,x:t.x,y:t.y,fill:e.IsDarkTheme?"white":"black"}),Object(h.jsx)(u,{shapeProps:t,AddPoint:e.RTreeAdapter.AddPoint,IsLeaf:e.RTreeAdapter.IsLeaf,Getpoints:e.Getpoints,SetPoints:e.SetPoints,isSelected:t.id===i,onSelect:function(){a(t.id)},onChange:function(i){var o=e.GetRectangles.slice();o[n]=i;var a=i.x,r=i.y,s=i.height,c=i.width;e.RTreeAdapter.OnRectSizeChange(t.id,[a,-1*(r+s),a+c,-1*r]),e.SetRectangles(o)}},n)]})})),e.Getpoints.map((function(e,t){return Object(h.jsx)(d.a,{x:e.x,y:e.y,radius:3,fill:"black",shadowBlur:30},t)})),Object(h.jsx)(d.e,{text:"Target",x:l[0],y:l[1],fill:e.IsDarkTheme?"white":"black"}),Object(h.jsx)(d.c,{x:l[0],y:l[1],width:300,height:300,stroke:"yellow",strokeWidth:1,dash:[1,1],shadowBlur:10,draggable:!0,onDragEnd:function(t){for(var n=performance.now(),i=e.RTreeAdapter.Search([t.target.x(),-1*(t.target.y()+300),t.target.x()+300,-1*t.target.y()]),o=performance.now(),a=e.FoundPoints.splice(),r=0;r<i.length;r++)a.push({parent_region_id:i[r].parent_region_id,name:i[r].name});console.log([t.target.x(),-1*(t.target.y()+300),t.target.x()+300,-1*t.target.y()]),console.log(JSON.stringify(e.RTreeAdapter.RegionHash())),e.SetFoundPoints(a),g([t.target.x(),t.target.y()]),e.SetMs(o-n)}})]})})},j=n(65),b=n.n(j),f=(n(144),n(145),function(){return Object(h.jsx)(b.a,{data:{name:"Parent",children:[{name:"Child One",children:[{name:"child3"}]},{name:"Child Two"}]},nodeRadius:15,margins:{top:20,bottom:10,left:20,right:200},height:700,width:1e3,animated:!0})}),p=n(177),x=n(179),O=n(175),y=n(180),m=n(178),R=n(174),w=(n(146),n(42)),v=n(66),k=function(){function e(t,n,i,o,a){Object(w.a)(this,e),this.id=t,this.parent_id=n,this.name=i,this.points=[],this.color=o,this.edges=a,this.regions=[]}return Object(v.a)(e,[{key:"AddSubRegion",value:function(e){this.regions.push(e)}},{key:"rectanglesOverlap",value:function(e,t,n,i){var o=e[0],a=e[1],r=t[0],s=t[1],c=n[0],l=n[1],d=i[0],h=i[1];return o<d&&c<r&&a<h&&l<s}},{key:"IsPointInsideRegion",value:function(e,t,n,i){var o=e[0],a=t[0],r=e[1],s=t[1];return n>o&&n<a&&i>r&&i<s}},{key:"GetRegionRecursive",value:function(e,t,n,i){if(n.IsLeaf())for(var o=0;o<n.points.length;o++)this.IsPointInsideRegion(e,t,n.points[o].x,n.points[o].y)&&i.push(n.points[o]);else for(o=0;o<n.regions.length;o++){var a=n.regions[o].edges,r=[a[0],a[1]],s=[a[2],a[3]];this.rectanglesOverlap(e,t,r,s)&&this.GetRegionRecursive(e,t,n.regions[o],i)}}},{key:"GetRegionsBasedOnTargetRegion",value:function(e,t){var n=[t[0],t[1]],i=[t[2],t[3]],o=[];return this.GetRegionRecursive(n,i,e,o),o}},{key:"IsLeaf",value:function(){return 0==this.regions.length}},{key:"AddPoint",value:function(e){this.points.push(e)}}]),e}(),S=function e(t,n,i,o,a){Object(w.a)(this,e),this.id=t,this.parent_region_id=n,this.name=i,this.x=o,this.y=a},P={},T=null,I={NewRegion:function(e,t,n,i,o){if(null!=P[e])throw"Id is already taken";if(null==P[t])throw"The parent id "+t+" Does not exists";P[e]=new k(e,t,n,i,o),P[t].AddSubRegion(P[e])},AddRootRegion:function(){T=new k(1,null,"root","#ffffff",[0,0,1e4,1e4]),P[1]=T},OnRectSizeChange:function(e,t){if(null==P[e])throw"Id does not exists";P[e].edges=t},GetRegionCount:function(){return Object.keys(P).length},AddPoint:function(e,t,n,i,o){if(null==P[t])throw"Id does not exists";P[t].AddPoint(new S(e,t,n,i,o))},Search:function(e){return null!=T?T.GetRegionsBasedOnTargetRegion(T,e):[]},RegionHash:function(){return P},IsLeaf:function(e){return P[e].IsLeaf()},PointsCount:function(e){return P[e].points.length},RegionExists:function(e){return null!=P[e]}};I.AddRootRegion();var C=Object(c.a)({IsDarkTheme:!0,IsCanvasView:!0,Rectangles:[],Points:[],FoundPoints:[],ms:0,dialogClosed:!1}).useGlobalState,A=function(){var e=C("IsDarkTheme"),t=Object(s.a)(e,2),n=t[0],i=t[1],o=C("IsCanvasView"),a=Object(s.a)(o,2),r=a[0],c=(a[1],C("Rectangles")),l=Object(s.a)(c,2),d=l[0],u=l[1],j=C("Points"),b=Object(s.a)(j,2),w=b[0],v=b[1],k=C("FoundPoints"),S=Object(s.a)(k,2),P=S[0],T=S[1],A=C("ms"),G=Object(s.a)(A,2),D=G[0],F=G[1],L=C("dialogClosed"),N=Object(s.a)(L,2),_=N[0],E=N[1];return Object(h.jsxs)("div",{className:"App",style:{"background-color":n?"#282c34":"white"},children:[Object(h.jsxs)("div",{className:"App-header",children:[Object(h.jsx)("h2",{style:{"text-align":"center",color:n?"white":"black"},children:"R Tree"}),Object(h.jsxs)("p",{style:{"font-size":"10px","text-align":"center",color:n?"white":"black"},children:["How to use ? ",Object(h.jsx)("br",{})," Click Add Region to add a region ,you can double tap it to resize it and you can drag it ",Object(h.jsx)("br",{}),"To add a point you need a mouse and hover on the point you need to add a point and then press the mouse mid scroll button .",Object(h.jsx)("br",{}),"You can click on show points to get to know the points which is searched",Object(h.jsx)("br",{})]}),Object(h.jsx)("a",{href:"https://github.com/generic-matrix/RTree",children:"Github"}),Object(h.jsx)("br",{}),Object(h.jsxs)("p",{style:{"font-size":"10px","text-align":"center",color:n?"white":"black"},children:[D," MS time taken"]}),Object(h.jsxs)("div",{style:{width:"100%",display:"flex","justify-content":"center"},children:[r?Object(h.jsxs)("div",{children:["\xa0",Object(h.jsx)(x.a,{variant:"outlined",color:"secondary",onClick:function(){return function(){var e=(986895|Math.floor(16777215*Math.random())).toString(16),t=d.slice(),n=prompt("Type in the region name ");if(t.push({x:0,y:0,width:100,height:100,fill:"#"+e,id:n}),""===n||null===n)alert("Invalid region name");else if(0===d.length)I.NewRegion(n,1,n,"#"+e,[0,-100,100,0]),u(t);else{var i=prompt("Type in parent region name ");""===i||null===i?alert("Invalid Parent name"):1==I.RegionExists(i)&&0==I.RegionExists(n)?I.PointsCount(i)<1?(I.NewRegion(n,i,n,"#"+e,[0,-100,100,0]),u(t)):alert("Region cannot be added on a region which already contains points"):alert("No Such Region with the parent id exists or region id is already taken")}}()},children:"Add Region"}),"\xa0"]}):Object(h.jsx)("div",{}),Object(h.jsxs)(x.a,{variant:"outlined",color:"secondary",onClick:function(){return E(!_)},children:["Show Points (",P.length,")"]}),"\xa0",Object(h.jsx)(x.a,{variant:"outlined",color:"secondary",onClick:function(){return i(!n)},children:n?"Day Theme":"Night Theme"}),"\xa0"]}),r?Object(h.jsx)(g,{GetRectangles:d,SetRectangles:u,SetFoundPoints:T,FoundPoints:P,Getpoints:w,SetPoints:v,IsDarkTheme:n,RTreeAdapter:I,SetMs:F}):Object(h.jsx)(f,{})]}),Object(h.jsxs)(p.a,{open:_,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(h.jsx)(y.a,{children:Object(h.jsx)("div",{style:{width:"100%"},children:P.map((function(e,t){return Object(h.jsxs)("div",{children:["\xa0\xa0\xa0",Object(h.jsx)(R.a,{badgeContent:"",color:"primary"}),Object(h.jsx)(m.a,{component:"div",display:"inline",p:1,m:1,children:e.name+" In region "+e.parent_region_id}),Object(h.jsx)("br",{})]})}))})}),Object(h.jsx)(O.a,{children:Object(h.jsx)(x.a,{color:"primary",onClick:function(){return E(!_)},children:"Done"})})]})]})},G=function(){return Object(h.jsx)(A,{})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,183)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),i(e),o(e),a(e),r(e)}))};r.a.render(Object(h.jsx)(G,{}),document.getElementById("root")),D()},78:function(e,t,n){}},[[151,1,2]]]);
//# sourceMappingURL=main.defa8a8d.chunk.js.map